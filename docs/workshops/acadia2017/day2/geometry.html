
<!DOCTYPE html>

<html lang="en">
<head>
<title>compas -- a computational framework for research in architecture and structures</title>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<meta content="Tom Van Mele" name="author"/>
<meta content="compas is a computational framework for research in architecture and structures." name="description"/>
<link crossorigin="anonymous" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" rel="stylesheet"/>
<link href="/css/github.css" rel="stylesheet" type="text/css"/>
<link href="/css/compas.css" rel="stylesheet" type="text/css"/>
<link href="/css/compas-reference.css" rel="stylesheet" type="text/css"/>
<link href="numerical.html" rel="next" title="Numerical"/>
<link href="../day2.html" rel="prev" title="Day 2"/>
<script async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript"></script>
</head>
<body data-spy="scroll" data-target="#compas-localnav">
<header class="navbar navbar-expand navbar-dark bg-dark compas-navbar">
<a class="navbar-brand" href="/">compas</a>
<ul class="navbar-nav">
<li class="nav-item">
<a class="nav-link active" href="/main/">Main library</a>
</li>
<li class="nav-item">
<a class="nav-link" href="/packages/">Additional Packages</a>
</li>
</ul>
</header>
<div class="container-fluid compas-container">
<div class="row flex-xl-nowrap">
<main class="col-12 col-md-9 col-xl-8 compas-content" role="main">
<nav class="breadcrumb">
<a class="breadcrumb-item" href="https://compas-dev.github.io/">compas</a>
<a class="breadcrumb-item" href="https://compas-dev.github.io/compas/index.html">main library</a>
<a class="breadcrumb-item" href="../../../workshops.html">workshops</a>
<a class="breadcrumb-item" href="../../acadia2017.html">acadia 2017</a>
<a accesskey="U" class="breadcrumb-item" href="../day2.html">day 2</a>
</nav>
<div class="section">
<span id="acadia2017-day2-geometry"></span><h1>Geometry</h1>
<div class="section">
<h2>Introduction</h2>
<p>The <em>compas</em> framework contains an extensive set of python geometry functions
and algorithms without any external dependencies. Code using the geometry
package can run in any Python or IronPython environment. Hence, any algorithm
or program using the geometry package can easily be integrated in different
applications (e.g.: Rhino, Blender, Maya, ...)</p>
<p>The full geometry reference can be found here:</p>
<ul class="simple">
<li><code class="xref py py-mod docutils literal">compas.geometry</code></li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Besides many basic geometry functions such as:</p>
<ul class="simple">
<li><a class="reference internal" href="../../../reference/generated/compas.geometry.add_vectors.html#compas.geometry.add_vectors" title="compas.geometry.add_vectors"><code class="xref py py-mod docutils literal">compas.geometry.add_vectors</code></a></li>
<li><a class="reference internal" href="../../../reference/generated/compas.geometry.subtract_vectors.html#compas.geometry.subtract_vectors" title="compas.geometry.subtract_vectors"><code class="xref py py-mod docutils literal">compas.geometry.subtract_vectors</code></a></li>
<li><a class="reference internal" href="../../../reference/generated/compas.geometry.intersection_line_plane.html#compas.geometry.intersection_line_plane" title="compas.geometry.intersection_line_plane"><code class="xref py py-mod docutils literal">compas.geometry.intersection_line_plane</code></a></li>
<li><a class="reference internal" href="../../../reference/generated/compas.geometry.closest_point_on_polyline.html#compas.geometry.closest_point_on_polyline" title="compas.geometry.closest_point_on_polyline"><code class="xref py py-mod docutils literal">compas.geometry.closest_point_on_polyline</code></a></li>
<li><a class="reference internal" href="../../../reference/generated/compas.geometry.is_point_in_triangle.html#compas.geometry.is_point_in_triangle" title="compas.geometry.is_point_in_triangle"><code class="xref py py-mod docutils literal">compas.geometry.is_point_in_triangle</code></a></li>
<li>...</li>
</ul>
<p>The geometry package also includes geometry
algorithms such as:</p>
<ul class="last simple">
<li><a class="reference internal" href="../../../reference/generated/compas.geometry.planarize_faces.html#compas.geometry.planarize_faces" title="compas.geometry.planarize_faces"><code class="xref py py-mod docutils literal">compas.geometry.planarize_faces</code></a></li>
<li><a class="reference internal" href="../../../reference/generated/compas.geometry.smooth_centroid.html#compas.geometry.smooth_centroid" title="compas.geometry.smooth_centroid"><code class="xref py py-mod docutils literal">compas.geometry.smooth_centroid</code></a></li>
<li><a class="reference internal" href="../../../reference/generated/compas.geometry.smooth_area.html#compas.geometry.smooth_area" title="compas.geometry.smooth_area"><code class="xref py py-mod docutils literal">compas.geometry.smooth_area</code></a></li>
<li><a class="reference internal" href="../../../reference/generated/compas.geometry.discrete_coons_patch.html#compas.geometry.discrete_coons_patch" title="compas.geometry.discrete_coons_patch"><code class="xref py py-mod docutils literal">compas.geometry.discrete_coons_patch</code></a></li>
<li>...</li>
</ul>
</div>
</div>
<div class="section">
<h2>Object-Oriented Interface vs Functions</h2>
<p>The geometry package features an object-oriented interface:</p>
<div class="highlight"><pre><code class="language-python border rounded"><span></span><span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">Vector</span>

<span class="n">u</span> <span class="o">=</span> <span class="n">Vector</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">Vector</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">u</span> <span class="o">+</span> <span class="n">v</span>

<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">length</span><span class="p">)</span>
</code></pre></div>

<p>The same vector calculations can be computed using functions and
lists (or tuples) as vectors:</p>
<div class="highlight"><pre><code class="language-python border rounded"><span></span><span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">add_vectors</span>
<span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">length_vector</span>

<span class="n">u</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
<span class="n">v</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">add_vectors</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">length_vector</span><span class="p">(</span><span class="n">r</span><span class="p">))</span>
</code></pre></div>

<div class="section">
<h3>Exercise:</h3>
<p>Create a set of 10.000 random vectors with the origin (1. ,2. ,3.) and compute their
resultant. Compare the preformance of an object-based and function-based method.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference internal" href="../../../reference/generated/generated/compas.geometry.Vector.from_start_end.html#compas.geometry.Vector.from_start_end" title="compas.geometry.Vector.from_start_end"><code class="xref py py-meth docutils literal">compas.geometry.Vector.from_start_end()</code></a></li>
<li><a class="reference internal" href="../../../reference/generated/generated/compas.geometry.Vector.from_start_end.html#compas.geometry.Vector.from_start_end" title="compas.geometry.Vector.from_start_end"><code class="xref py py-meth docutils literal">compas.geometry.Vector.from_start_end()</code></a></li>
<li><a class="reference internal" href="../../../reference/generated/compas.geometry.vector_from_points.html#compas.geometry.vector_from_points" title="compas.geometry.vector_from_points"><code class="xref py py-func docutils literal">compas.geometry.vector_from_points()</code></a></li>
<li><a class="reference internal" href="../../../reference/generated/compas.geometry.add_vectors.html#compas.geometry.add_vectors" title="compas.geometry.add_vectors"><code class="xref py py-func docutils literal">compas.geometry.add_vectors()</code></a></li>
<li><a class="reference internal" href="../../../reference/generated/compas.geometry.sum_vectors.html#compas.geometry.sum_vectors" title="compas.geometry.sum_vectors"><code class="xref py py-func docutils literal">compas.geometry.sum_vectors()</code></a></li>
</ul>
</div>
<p>Solution:</p>
<div class="highlight"><pre><code class="language-python border rounded"><span></span><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">random</span> <span class="k">as</span> <span class="n">rnd</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">Vector</span>

<span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">add_vectors</span>
<span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">sum_vectors</span>
<span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">vector_from_points</span>


<span class="c1"># create random points</span>
<span class="n">points</span> <span class="o">=</span> <span class="p">[(</span><span class="n">rnd</span><span class="p">(),</span> <span class="n">rnd</span><span class="p">(),</span> <span class="n">rnd</span><span class="p">())</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10000</span><span class="p">)]</span>
<span class="c1"># define origin</span>
<span class="n">origin</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">]</span>


<span class="c1"># Object-based method</span>
<span class="n">tic</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="c1">#-------------------------</span>
<span class="n">vecs</span> <span class="o">=</span> <span class="p">[</span><span class="n">Vector</span><span class="o">.</span><span class="n">from_start_end</span><span class="p">(</span><span class="n">origin</span><span class="p">,</span> <span class="n">pt</span><span class="p">)</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">points</span><span class="p">]</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">Vector</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span>
<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">vecs</span><span class="p">:</span>
    <span class="n">res</span> <span class="o">+=</span> <span class="n">v</span>
<span class="c1">#-------------------------</span>
<span class="n">toc</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s1">'{0} seconds to compute for object-based method'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">toc</span> <span class="o">-</span> <span class="n">tic</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">'------------------'</span><span class="p">)</span>


<span class="c1"># Function-based method A</span>
<span class="n">tic</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="c1">#-------------------------</span>
<span class="n">vecs</span> <span class="o">=</span> <span class="p">[</span><span class="n">vector_from_points</span><span class="p">(</span><span class="n">origin</span><span class="p">,</span> <span class="n">pt</span><span class="p">)</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">points</span><span class="p">]</span>
<span class="n">res</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">]</span>
<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">vecs</span><span class="p">:</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">add_vectors</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
<span class="c1">#-------------------------</span>
<span class="n">toc</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s1">'{0} seconds to compute for function-based method A'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">toc</span> <span class="o">-</span> <span class="n">tic</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">'------------------'</span><span class="p">)</span>


<span class="c1"># Function-based method B</span>
<span class="n">tic</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="c1">#-------------------------</span>
<span class="n">vecs</span> <span class="o">=</span> <span class="p">[</span><span class="n">vector_from_points</span><span class="p">(</span><span class="n">origin</span><span class="p">,</span> <span class="n">pt</span><span class="p">)</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">points</span><span class="p">]</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">sum_vectors</span><span class="p">(</span><span class="n">vecs</span><span class="p">)</span>
<span class="c1">#-------------------------</span>
<span class="n">toc</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s1">'{0} seconds to compute for function-based method B'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">toc</span> <span class="o">-</span> <span class="n">tic</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">'------------------'</span><span class="p">)</span>
</code></pre></div>

</div>
</div>
<div class="section">
<h2>Translational Surfaces for Gridshells</h2>
<p>Using translational surfaces for the design of gridshells allows to explore freeform
spaces that can be built from planar (glass) panels. Jörg Schlaich together with Hans
Schober developed several geometric design methods for various gridshells built in the
last decades.</p>
<figure class="figure">
<img alt="../../../images/sbp.jpg" class="figure-img img-fluid" src="../../../images/sbp.jpg"/>
<figcaption class="figure-caption">Cabot Circus Bristol and Deutsches Historisches Museum (Photo: SBP)</figcaption>
</figure>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The following examples are made to be visualised in Rhino. Please check if you
have the right IronPython version installed.</p>
<p>Open the script editor in Rhino (Command: _EditPythonScript) and run:</p>
<blockquote>
<div><div class="highlight"><pre><code class="language-python border rounded"><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="k">print</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="p">)</span>
</code></pre></div>

</div></blockquote>
<p class="last">Make sure to have version 2.7.5 installed!</p>
</div>
<p>The following example shows the generation of a simple tanslation surface based on a
given profile and rail curve.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The following examples are based on the 3dm file:</p>
<ul class="last simple">
<li><a class="reference download internal" download="" href="../../../downloads/trans_srf.3dm"><code class="xref download docutils literal">trans_srf.3dm</code></a></li>
</ul>
</div>
<figure class="figure">
<img alt="../../../images/trans_srf_01.jpg" class="figure-img img-fluid" src="../../../images/trans_srf_01.jpg"/>
<figcaption class="figure-caption">See 3dm file for details</figcaption>
</figure>
<div class="highlight"><pre><code class="language-python border rounded"><span></span><span class="kn">import</span> <span class="nn">rhinoscriptsyntax</span> <span class="kn">as</span> <span class="nn">rs</span>

<span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">subtract_vectors</span>
<span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">centroid_points</span>
<span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">translate_points</span>

<span class="c1"># Get inputs</span>
<span class="n">crv_p</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">GetObject</span><span class="p">(</span><span class="s2">"Select profile"</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">crv_r</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">GetObject</span><span class="p">(</span><span class="s2">"Select rail"</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>

<span class="n">div_p</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">div_r</span> <span class="o">=</span> <span class="mi">40</span>

<span class="c1"># divide profile and rail curve</span>
<span class="n">pts_p</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">DivideCurve</span><span class="p">(</span><span class="n">crv_p</span><span class="p">,</span> <span class="n">div_p</span><span class="p">)</span>
<span class="n">pts_r</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">DivideCurve</span><span class="p">(</span><span class="n">crv_r</span><span class="p">,</span> <span class="n">div_r</span><span class="p">)</span>


<span class="c1"># ------------------------------</span>
<span class="c1"># compas geometry function</span>

<span class="c1"># reference point for profile curve</span>
<span class="n">pt_ref</span> <span class="o">=</span> <span class="n">centroid_points</span><span class="p">([</span><span class="n">pts_p</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pts_p</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]])</span>

<span class="c1"># create profiles along the rail curve</span>
<span class="n">pts_sets</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">div_r</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
    <span class="n">vec_1</span> <span class="o">=</span> <span class="n">subtract_vectors</span><span class="p">(</span><span class="n">pts_r</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">pt_ref</span><span class="p">)</span>
    <span class="n">points</span> <span class="o">=</span> <span class="n">translate_points</span><span class="p">(</span><span class="n">pts_p</span><span class="p">,</span> <span class="n">vec_1</span><span class="p">)</span>
    <span class="n">pts_sets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>

<span class="c1"># create polyline point sets for each face</span>
<span class="n">polys</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pts_sets</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pts_sets</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">p1</span> <span class="o">=</span> <span class="n">pts_sets</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
        <span class="n">p2</span> <span class="o">=</span> <span class="n">pts_sets</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
        <span class="n">p3</span> <span class="o">=</span> <span class="n">pts_sets</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">p4</span> <span class="o">=</span> <span class="n">pts_sets</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">polys</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">,</span> <span class="n">p4</span><span class="p">,</span> <span class="n">p1</span><span class="p">])</span>

<span class="c1"># compas geometry function</span>
<span class="c1"># ------------------------------</span>

<span class="c1"># draw gridshell in Rhino</span>
<span class="n">rs</span><span class="o">.</span><span class="n">EnableRedraw</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="k">for</span> <span class="n">poly</span> <span class="ow">in</span> <span class="n">polys</span><span class="p">:</span>
    <span class="n">rs</span><span class="o">.</span><span class="n">AddPolyline</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span>
<span class="n">rs</span><span class="o">.</span><span class="n">EnableRedraw</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div>

<p>The following example shows the generation of a tanslation surface with profile
curves aligned with the rail curve.</p>
<figure class="figure">
<img alt="../../../images/trans_srf_03.jpg" class="figure-img img-fluid" src="../../../images/trans_srf_03.jpg"/>
<figcaption class="figure-caption">See 3dm file for details</figcaption>
</figure>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference internal" href="../../../reference/generated/compas.geometry.project_points_plane.html#compas.geometry.project_points_plane" title="compas.geometry.project_points_plane"><code class="xref py py-func docutils literal">compas.geometry.project_points_plane()</code></a></li>
</ul>
</div>
<div class="highlight"><pre><code class="language-python border rounded"><span></span><span class="kn">import</span> <span class="nn">rhinoscriptsyntax</span> <span class="kn">as</span> <span class="nn">rs</span>

<span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">subtract_vectors</span>
<span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">project_points_plane</span>

<span class="c1"># Get inputs</span>
<span class="n">crv_p</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">GetObject</span><span class="p">(</span><span class="s2">"Select profile"</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">crv_a</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">GetObject</span><span class="p">(</span><span class="s2">"Select rail 1"</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>

<span class="n">div_p</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">div_r</span> <span class="o">=</span> <span class="mi">40</span>

<span class="c1"># divide profile and rail curve</span>
<span class="n">pts_p</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">DivideCurve</span><span class="p">(</span><span class="n">crv_p</span><span class="p">,</span> <span class="n">div_p</span><span class="p">)</span>
<span class="n">pts_a</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">DivideCurve</span><span class="p">(</span><span class="n">crv_a</span><span class="p">,</span> <span class="n">div_r</span><span class="p">)</span>


<span class="c1"># ------------------------------</span>
<span class="c1"># compas geometry function</span>

<span class="c1"># create planes along the rail curve</span>
<span class="n">planes</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">div_r</span><span class="p">):</span>
    <span class="n">vec</span> <span class="o">=</span> <span class="n">subtract_vectors</span><span class="p">(</span><span class="n">pts_a</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span> <span class="n">pts_a</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">planes</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">pts_a</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">vec</span><span class="p">])</span>

<span class="c1"># subsequentely project profile curve to all planes</span>
<span class="n">pts_uv</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">pts</span> <span class="o">=</span> <span class="n">pts_p</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">div_r</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
    <span class="n">pts</span> <span class="o">=</span> <span class="n">project_points_plane</span><span class="p">(</span><span class="n">pts</span><span class="p">,</span> <span class="n">planes</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">pts_uv</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pts</span><span class="p">)</span>

<span class="c1"># create polyline point sets for each face</span>
<span class="n">polys</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pts_uv</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pts_uv</span><span class="p">[</span><span class="n">u</span><span class="p">])</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">p1</span> <span class="o">=</span> <span class="n">pts_uv</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="n">v</span><span class="p">]</span>
        <span class="n">p2</span> <span class="o">=</span> <span class="n">pts_uv</span><span class="p">[</span><span class="n">u</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">v</span><span class="p">]</span>
        <span class="n">p3</span> <span class="o">=</span> <span class="n">pts_uv</span><span class="p">[</span><span class="n">u</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">v</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">p4</span> <span class="o">=</span> <span class="n">pts_uv</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="n">v</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">polys</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">,</span> <span class="n">p4</span><span class="p">,</span> <span class="n">p1</span><span class="p">])</span>

<span class="c1"># compas geometry function</span>
<span class="c1"># ------------------------------</span>

<span class="c1"># draw gridshell in Rhino</span>
<span class="n">rs</span><span class="o">.</span><span class="n">EnableRedraw</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="k">for</span> <span class="n">poly</span> <span class="ow">in</span> <span class="n">polys</span><span class="p">:</span>
    <span class="n">rs</span><span class="o">.</span><span class="n">AddPolyline</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span>
<span class="n">rs</span><span class="o">.</span><span class="n">EnableRedraw</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div>

<div class="section">
<h3>Exercise:</h3>
<p>The following figure shows the generation of a tanslation surface with two profile
curves. The method geneartes planes along the two rail curves and subsequentely uses
intersections with conical extrusions to guarantee the planarity of resulting mesh.</p>
<figure class="figure">
<img alt="../../../images/trans_srf_04.jpg" class="figure-img img-fluid" src="../../../images/trans_srf_04.jpg"/>
<figcaption class="figure-caption">See 3dm file for details</figcaption>
</figure>
<p>The steps of the algorithm are:</p>
<ul class="simple">
<li>blabla bl lal lsldd bllbblb
blblblbl bldlbl
(<a class="reference internal" href="../../../reference/generated/compas.geometry.add_vectors.html#compas.geometry.add_vectors" title="compas.geometry.add_vectors"><code class="xref py py-func docutils literal">compas.geometry.add_vectors()</code></a>)</li>
<li>...</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The following examples is also available for Grasshopper:</p>
<ul class="last simple">
<li><a class="reference download internal" download="" href="../../../downloads/trans_srf.gh"><code class="xref download docutils literal">trans_srf.3dm</code></a></li>
</ul>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference internal" href="../../../reference/generated/compas.geometry.add_vectors.html#compas.geometry.add_vectors" title="compas.geometry.add_vectors"><code class="xref py py-func docutils literal">compas.geometry.add_vectors()</code></a></li>
<li><a class="reference internal" href="../../../reference/generated/compas.geometry.centroid_points.html#compas.geometry.centroid_points" title="compas.geometry.centroid_points"><code class="xref py py-func docutils literal">compas.geometry.centroid_points()</code></a></li>
<li><a class="reference internal" href="../../../reference/generated/compas.geometry.intersection_line_plane.html#compas.geometry.intersection_line_plane" title="compas.geometry.intersection_line_plane"><code class="xref py py-func docutils literal">compas.geometry.intersection_line_plane()</code></a></li>
<li><a class="reference internal" href="../../../reference/generated/compas.geometry.intersection_line_line.html#compas.geometry.intersection_line_line" title="compas.geometry.intersection_line_line"><code class="xref py py-func docutils literal">compas.geometry.intersection_line_line()</code></a></li>
</ul>
</div>
<div class="highlight"><pre><code class="language-python border rounded"><span></span><span class="kn">import</span> <span class="nn">rhinoscriptsyntax</span> <span class="kn">as</span> <span class="nn">rs</span>

<span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">subtract_vectors</span>
<span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">add_vectors</span>
<span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">centroid_points</span>
<span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">intersection_line_plane</span>
<span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">intersection_line_line</span>

<span class="c1"># Get inputs</span>
<span class="n">crv_p</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">GetObject</span><span class="p">(</span><span class="s2">"Select profile"</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">crv_a</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">GetObject</span><span class="p">(</span><span class="s2">"Select rail 1"</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="n">crv_b</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">GetObject</span><span class="p">(</span><span class="s2">"Select rail 2"</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>

<span class="n">div_p</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">div_r</span> <span class="o">=</span> <span class="mi">40</span>

<span class="c1"># divide profile and rail curves</span>
<span class="n">pts_p</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">DivideCurve</span><span class="p">(</span><span class="n">crv_p</span><span class="p">,</span> <span class="n">div_p</span><span class="p">)</span>
<span class="n">pts_a</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">DivideCurve</span><span class="p">(</span><span class="n">crv_a</span><span class="p">,</span> <span class="n">div_r</span><span class="p">)</span>
<span class="n">pts_b</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">DivideCurve</span><span class="p">(</span><span class="n">crv_b</span><span class="p">,</span> <span class="n">div_r</span><span class="p">)</span>

<span class="c1"># ------------------------------</span>
<span class="c1"># compas geometry function</span>

<span class="c1"># create planes along the rail curve</span>
<span class="n">planes</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">div_r</span><span class="p">):</span>
    <span class="n">pt_mid</span> <span class="o">=</span> <span class="n">centroid_points</span><span class="p">([</span><span class="n">pts_a</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">pts_b</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span>
    <span class="n">vec_a</span> <span class="o">=</span> <span class="n">subtract_vectors</span><span class="p">(</span><span class="n">pts_a</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span> <span class="n">pts_a</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">vec_b</span> <span class="o">=</span> <span class="n">subtract_vectors</span><span class="p">(</span><span class="n">pts_b</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span> <span class="n">pts_b</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">vec_a</span> <span class="o">=</span> <span class="n">normalize_vector</span><span class="p">(</span><span class="n">vec_a</span><span class="p">)</span>
    <span class="n">vec_b</span> <span class="o">=</span> <span class="n">normalize_vector</span><span class="p">(</span><span class="n">vec_b</span><span class="p">)</span>
    <span class="n">vec</span> <span class="o">=</span> <span class="n">add_vectors</span><span class="p">(</span><span class="n">vec_a</span><span class="p">,</span> <span class="n">vec_b</span><span class="p">)</span>
    <span class="n">planes</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">pt_mid</span><span class="p">,</span> <span class="n">vec</span><span class="p">])</span>

<span class="c1"># create profiles</span>
<span class="n">pts_uv</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">pts</span> <span class="o">=</span> <span class="n">pts_p</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">div_r</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
    <span class="n">ray_a</span> <span class="o">=</span> <span class="p">[</span><span class="n">pts_a</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">pts_a</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]]</span>
    <span class="n">ray_b</span> <span class="o">=</span> <span class="p">[</span><span class="n">pts_b</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">pts_b</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]]</span>
    <span class="n">pts_x</span> <span class="o">=</span> <span class="n">intersection_line_line</span><span class="p">(</span><span class="n">ray_a</span><span class="p">,</span> <span class="n">ray_b</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">None</span> <span class="ow">in</span> <span class="n">pts_x</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">"parallel!"</span><span class="p">)</span>
    <span class="n">pt_cent</span> <span class="o">=</span> <span class="n">centroid_points</span><span class="p">(</span><span class="n">pts_x</span><span class="p">)</span>
    <span class="c1"># computes intersection between a plane and all lines</span>
    <span class="c1"># from the profile curve points to the intersection point</span>
    <span class="n">pts</span> <span class="o">=</span> <span class="p">[</span><span class="n">intersection_line_plane</span><span class="p">([</span><span class="n">pt</span><span class="p">,</span> <span class="n">pt_cent</span><span class="p">],</span> <span class="n">planes</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">pts</span><span class="p">]</span>

    <span class="n">pts_uv</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pts</span><span class="p">)</span>

<span class="c1"># create polyline point sets for each face</span>
<span class="n">polys</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pts_uv</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pts_uv</span><span class="p">[</span><span class="n">u</span><span class="p">])</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">p1</span> <span class="o">=</span> <span class="n">pts_uv</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="n">v</span><span class="p">]</span>
        <span class="n">p2</span> <span class="o">=</span> <span class="n">pts_uv</span><span class="p">[</span><span class="n">u</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">v</span><span class="p">]</span>
        <span class="n">p3</span> <span class="o">=</span> <span class="n">pts_uv</span><span class="p">[</span><span class="n">u</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">v</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">p4</span> <span class="o">=</span> <span class="n">pts_uv</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="n">v</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">polys</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">,</span> <span class="n">p4</span><span class="p">,</span> <span class="n">p1</span><span class="p">])</span>

<span class="c1"># compas geometry function</span>
<span class="c1"># ------------------------------</span>

<span class="c1"># draw gridshell in Rhino</span>
<span class="n">rs</span><span class="o">.</span><span class="n">EnableRedraw</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="k">for</span> <span class="n">poly</span> <span class="ow">in</span> <span class="n">polys</span><span class="p">:</span>
    <span class="n">rs</span><span class="o">.</span><span class="n">AddPolyline</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span>
<span class="n">rs</span><span class="o">.</span><span class="n">EnableRedraw</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div>

</div>
</div>
<div class="section">
<h2>Torsion-free Elements for Gridshells</h2>
<ul class="simple">
<li>Create a 3D coons patch.</li>
</ul>
<div class="highlight"><pre><code class="language-python border rounded"><span></span><span class="kn">import</span> <span class="nn">rhinoscriptsyntax</span> <span class="kn">as</span> <span class="nn">rs</span>

<span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">add_vectors</span>

<span class="kn">from</span> <span class="nn">compas.datastructures.mesh</span> <span class="kn">import</span> <span class="n">Mesh</span>
<span class="kn">from</span> <span class="nn">compas_rhino.helpers.artists.meshartist</span> <span class="kn">import</span> <span class="n">MeshArtist</span>
<span class="kn">from</span> <span class="nn">compas.geometry.algorithms.interpolation</span> <span class="kn">import</span> <span class="n">discrete_coons_patch</span>
<span class="kn">from</span> <span class="nn">compas.datastructures</span> <span class="kn">import</span> <span class="n">mesh_cull_duplicate_vertices</span>



<span class="n">crv_ab</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">GetObject</span><span class="p">(</span><span class="s2">"Select ab"</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="n">crv_bc</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">GetObject</span><span class="p">(</span><span class="s2">"Select bc"</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="n">crv_dc</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">GetObject</span><span class="p">(</span><span class="s2">"Select cd"</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="n">crv_ad</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">GetObject</span><span class="p">(</span><span class="s2">"Select ad"</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>

<span class="n">div_a</span> <span class="o">=</span> <span class="mi">15</span>
<span class="n">div_b</span> <span class="o">=</span> <span class="mi">15</span>

<span class="n">ab</span><span class="p">,</span> <span class="n">bc</span><span class="p">,</span> <span class="n">dc</span><span class="p">,</span> <span class="n">ad</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span>

<span class="k">if</span> <span class="n">crv_ab</span><span class="p">:</span> <span class="n">ab</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">DivideCurve</span><span class="p">(</span><span class="n">crv_ab</span><span class="p">,</span> <span class="n">div_a</span><span class="p">)</span>
<span class="k">if</span> <span class="n">crv_bc</span><span class="p">:</span> <span class="n">bc</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">DivideCurve</span><span class="p">(</span><span class="n">crv_bc</span><span class="p">,</span> <span class="n">div_b</span><span class="p">)</span>
<span class="k">if</span> <span class="n">crv_dc</span><span class="p">:</span> <span class="n">dc</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">DivideCurve</span><span class="p">(</span><span class="n">crv_dc</span><span class="p">,</span> <span class="n">div_a</span><span class="p">)</span>
<span class="k">if</span> <span class="n">crv_ad</span><span class="p">:</span> <span class="n">ad</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">DivideCurve</span><span class="p">(</span><span class="n">crv_ad</span><span class="p">,</span> <span class="n">div_b</span><span class="p">)</span>

<span class="n">vertices</span><span class="p">,</span> <span class="n">face_vertices</span> <span class="o">=</span> <span class="n">discrete_coons_patch</span><span class="p">(</span><span class="n">ab</span><span class="p">,</span> <span class="n">bc</span><span class="p">,</span> <span class="n">dc</span><span class="p">,</span> <span class="n">ad</span><span class="p">)</span>
<span class="n">coon</span> <span class="o">=</span> <span class="n">Mesh</span><span class="o">.</span><span class="n">from_vertices_and_faces</span><span class="p">(</span><span class="n">vertices</span><span class="p">,</span> <span class="n">face_vertices</span><span class="p">)</span>

<span class="n">artist</span> <span class="o">=</span> <span class="n">MeshArtist</span><span class="p">(</span><span class="n">coon</span><span class="p">,</span> <span class="n">layer</span><span class="o">=</span><span class="s1">'MeshArtist'</span><span class="p">)</span>
<span class="n">artist</span><span class="o">.</span><span class="n">draw_edges</span><span class="p">()</span>
<span class="n">artist</span><span class="o">.</span><span class="n">draw_vertices</span><span class="p">()</span>
<span class="n">artist</span><span class="o">.</span><span class="n">draw_faces</span><span class="p">()</span>
<span class="c1">#artist.redraw(1.0)</span>


<span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">coon</span><span class="o">.</span><span class="n">edges</span><span class="p">():</span>
    <span class="n">pt_u</span> <span class="o">=</span> <span class="n">coon</span><span class="o">.</span><span class="n">vertex_coordinates</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>
    <span class="n">pt_v</span> <span class="o">=</span> <span class="n">coon</span><span class="o">.</span><span class="n">vertex_coordinates</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
    <span class="n">vec_u</span> <span class="o">=</span> <span class="n">coon</span><span class="o">.</span><span class="n">vertex_normal</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>
    <span class="n">vec_v</span> <span class="o">=</span> <span class="n">coon</span><span class="o">.</span><span class="n">vertex_normal</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
    <span class="n">pt_uu</span> <span class="o">=</span> <span class="n">add_vectors</span><span class="p">(</span><span class="n">pt_u</span><span class="p">,</span> <span class="n">vec_u</span><span class="p">)</span>
    <span class="n">pt_vv</span> <span class="o">=</span> <span class="n">add_vectors</span><span class="p">(</span><span class="n">pt_v</span><span class="p">,</span> <span class="n">vec_v</span><span class="p">)</span>
    <span class="n">rs</span><span class="o">.</span><span class="n">AddPolyline</span><span class="p">([</span><span class="n">pt_u</span><span class="p">,</span><span class="n">pt_v</span><span class="p">,</span><span class="n">pt_vv</span><span class="p">,</span><span class="n">pt_uu</span><span class="p">,</span><span class="n">pt_u</span><span class="p">])</span>
</code></pre></div>

<ul class="simple">
<li>make a mesh.</li>
<li>populate fins</li>
<li>planarize fins</li>
<li>constrain fins to a specific height</li>
</ul>
</div>
<div class="section">
<h2>Tessellation of a freeform barrel vault</h2>
<p>Generate uv staggered pattern:</p>
<div class="highlight"><pre><code class="language-python border rounded"><span></span><span class="kn">import</span> <span class="nn">rhinoscriptsyntax</span> <span class="kn">as</span> <span class="nn">rs</span>

<span class="kn">from</span> <span class="nn">compas_rhino</span> <span class="kn">import</span> <span class="n">uv_points_from_surface</span>

<span class="n">srf</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">GetObject</span><span class="p">(</span><span class="s2">"Select Surface"</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span>

<span class="n">u_div</span> <span class="o">=</span> <span class="mi">30</span>
<span class="n">v_div</span> <span class="o">=</span> <span class="mi">30</span>

<span class="c1">#create initial mesh</span>
<span class="n">pts_uv</span> <span class="o">=</span> <span class="n">uv_points_from_surface</span><span class="p">(</span><span class="n">srf</span><span class="p">,</span><span class="n">u_div</span><span class="p">,</span><span class="n">v_div</span><span class="p">)</span>

<span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">u_div</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
    <span class="n">rs</span><span class="o">.</span><span class="n">AddPolyline</span><span class="p">(</span><span class="n">pts_uv</span><span class="p">[</span><span class="n">u</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">v_div</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">u</span> <span class="o">%</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">rs</span><span class="o">.</span><span class="n">AddLine</span><span class="p">(</span><span class="n">pts_uv</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="n">v</span><span class="p">],</span><span class="n">pts_uv</span><span class="p">[</span><span class="n">u</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">v</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">rs</span><span class="o">.</span><span class="n">AddLine</span><span class="p">(</span><span class="n">pts_uv</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="n">v</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span><span class="n">pts_uv</span><span class="p">[</span><span class="n">u</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">v</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
</code></pre></div>

<div class="highlight"><pre><code class="language-python border rounded"><span></span><span class="kn">import</span> <span class="nn">math</span>

<span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">convex_hull</span>
<span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">orient_points</span>

<span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">subtract_vectors</span>
<span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">normalize_vector</span>
<span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">add_vectors</span>
<span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">scale_vector</span>

<span class="kn">from</span> <span class="nn">compas.datastructures.mesh</span> <span class="kn">import</span> <span class="n">Mesh</span>
<span class="kn">from</span> <span class="nn">compas.datastructures.mesh</span> <span class="kn">import</span> <span class="n">mesh_subdivide_catmullclark</span>

<span class="kn">from</span> <span class="nn">compas.datastructures.network</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="kn">from</span> <span class="nn">compas_rhino</span> <span class="kn">import</span> <span class="n">mesh_draw_faces</span>

<span class="kn">import</span> <span class="nn">rhinoscriptsyntax</span> <span class="kn">as</span> <span class="nn">rs</span>


<span class="k">def</span> <span class="nf">generate_section</span><span class="p">(</span><span class="n">radius</span><span class="p">,</span> <span class="n">target_plane</span><span class="p">,</span> <span class="n">flag</span><span class="p">):</span>
    <span class="n">num_p</span> <span class="o">=</span> <span class="mi">4</span>  <span class="c1"># discretization of the circle</span>
    <span class="n">theta</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="n">num_p</span>  <span class="c1"># angle step size</span>
    <span class="c1"># create cross section points around the origin</span>
    <span class="n">points</span> <span class="o">=</span> <span class="p">[(</span><span class="n">radius</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span> <span class="o">*</span> <span class="n">i</span><span class="p">),</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span> <span class="o">*</span> <span class="n">i</span><span class="p">),</span> <span class="mf">0.</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_p</span><span class="p">)]</span>
    <span class="c1"># align cross section points with the edge</span>
    <span class="k">if</span> <span class="n">flag</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">target_plane</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">scale_vector</span><span class="p">(</span><span class="n">target_plane</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">points</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">orient_points</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">target_plane</span><span class="o">=</span><span class="n">target_plane</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">generate_node</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">fac</span><span class="p">):</span>
    <span class="c1"># initialize mesh object</span>
    <span class="n">mesh</span> <span class="o">=</span> <span class="n">Mesh</span><span class="p">()</span>
    <span class="n">mesh</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'mesh'</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="c1"># coordinates of the node</span>
    <span class="n">pt_cent</span> <span class="o">=</span> <span class="n">network</span><span class="o">.</span><span class="n">vertex_coordinates</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="c1"># u's and v's of all connected edges</span>
    <span class="n">edges</span> <span class="o">=</span> <span class="n">network</span><span class="o">.</span><span class="n">vertex_connected_edges</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

    <span class="c1"># loop over all edges</span>
    <span class="n">section_keys</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">edges</span><span class="p">:</span>
        <span class="c1"># create edge vector</span>
        <span class="c1"># check if edges point towards or away from the node</span>
        <span class="k">if</span> <span class="n">u</span> <span class="o">==</span> <span class="n">key</span><span class="p">:</span>
            <span class="n">vec_nbr</span> <span class="o">=</span> <span class="n">subtract_vectors</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">vertex_coordinates</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="n">network</span><span class="o">.</span><span class="n">vertex_coordinates</span><span class="p">(</span><span class="n">u</span><span class="p">))</span>
            <span class="n">flag</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">flag</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">vec_nbr</span> <span class="o">=</span> <span class="n">subtract_vectors</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">vertex_coordinates</span><span class="p">(</span><span class="n">u</span><span class="p">),</span> <span class="n">network</span><span class="o">.</span><span class="n">vertex_coordinates</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>

        <span class="c1"># create point to locate the inner section</span>
        <span class="n">pt_1</span> <span class="o">=</span> <span class="n">add_vectors</span><span class="p">(</span><span class="n">pt_cent</span><span class="p">,</span> <span class="n">scale_vector</span><span class="p">(</span><span class="n">vec_nbr</span><span class="p">,</span> <span class="n">fac</span><span class="p">))</span>
        <span class="c1"># create point to locate the outer section</span>
        <span class="n">pt_2</span> <span class="o">=</span> <span class="n">add_vectors</span><span class="p">(</span><span class="n">pt_cent</span><span class="p">,</span> <span class="n">scale_vector</span><span class="p">(</span><span class="n">vec_nbr</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">))</span>
        <span class="c1"># create inner cross section points</span>
        <span class="n">points</span> <span class="o">=</span> <span class="n">generate_section</span><span class="p">(</span><span class="n">radius</span><span class="p">,</span> <span class="p">[</span><span class="n">pt_1</span><span class="p">,</span> <span class="n">normalize_vector</span><span class="p">(</span><span class="n">vec_nbr</span><span class="p">)],</span><span class="n">flag</span><span class="p">)</span>

        <span class="n">inner_keys</span> <span class="o">=</span> <span class="p">[</span><span class="n">mesh</span><span class="o">.</span><span class="n">add_vertex</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="n">z</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="ow">in</span> <span class="n">points</span><span class="p">]</span>
        <span class="c1"># create outer cross section points</span>
        <span class="n">points</span> <span class="o">=</span> <span class="n">generate_section</span><span class="p">(</span><span class="n">radius</span><span class="p">,</span> <span class="p">[</span><span class="n">pt_2</span><span class="p">,</span> <span class="n">normalize_vector</span><span class="p">(</span><span class="n">vec_nbr</span><span class="p">)],</span><span class="n">flag</span><span class="p">)</span>
        <span class="n">outer_keys</span> <span class="o">=</span> <span class="p">[</span><span class="n">mesh</span><span class="o">.</span><span class="n">add_vertex</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="n">z</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="ow">in</span> <span class="n">points</span><span class="p">]</span>

        <span class="c1"># create faces between inner and outer cross section</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">inner_keys</span><span class="p">)):</span>
            <span class="n">face</span> <span class="o">=</span> <span class="p">[</span><span class="n">inner_keys</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">],</span> <span class="n">inner_keys</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">outer_keys</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">outer_keys</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]]</span>
            <span class="n">mesh</span><span class="o">.</span><span class="n">add_face</span><span class="p">(</span><span class="n">face</span><span class="p">)</span>

        <span class="n">section_keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">inner_keys</span><span class="p">)</span>

    <span class="c1"># vertices coordinates of all inner cross sections</span>
    <span class="n">section_keys_all</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span> <span class="k">for</span> <span class="n">sublist</span> <span class="ow">in</span> <span class="n">section_keys</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">sublist</span><span class="p">]</span>
    <span class="n">points</span> <span class="o">=</span> <span class="p">[</span><span class="n">mesh</span><span class="o">.</span><span class="n">vertex_coordinates</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">section_keys_all</span><span class="p">]</span>
    <span class="c1"># key index list for mapping</span>
    <span class="n">key_index</span> <span class="o">=</span> <span class="p">[</span><span class="n">key</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">section_keys_all</span><span class="p">)]</span>
    <span class="c1"># compute convex hull for all inner cross section points</span>
    <span class="n">faces_index</span> <span class="o">=</span> <span class="n">convex_hull</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
    <span class="c1"># add convex hull faces to the mesh</span>
    <span class="k">for</span> <span class="n">face_index</span> <span class="ow">in</span> <span class="n">faces_index</span><span class="p">:</span>
        <span class="n">face</span> <span class="o">=</span> <span class="p">[</span><span class="n">key_index</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">face_index</span><span class="p">]</span>
        <span class="n">add_face</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">for</span> <span class="n">section_key</span> <span class="ow">in</span> <span class="n">section_keys</span><span class="p">:</span>
            <span class="c1"># don't add faces for the cross section caps</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">face</span><span class="p">)</span> <span class="o">&amp;</span> <span class="nb">set</span><span class="p">(</span><span class="n">section_key</span><span class="p">))</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">add_face</span> <span class="o">=</span> <span class="bp">False</span>
                <span class="k">break</span>
        <span class="c1">#add face to mesh</span>
        <span class="k">if</span> <span class="n">add_face</span><span class="p">:</span>
            <span class="n">mesh</span><span class="o">.</span><span class="n">add_face</span><span class="p">(</span><span class="n">face</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">mesh</span>


<span class="c1"># This code computes a solidified smooth mesh from a spatial network of lines.</span>
<span class="c1"># The shown method yields similar results as the exoskeleton plugin for Grasshopper</span>
<span class="c1"># to create meshes for 3D pinting.</span>

<span class="c1"># select a network of lines</span>
<span class="n">objs</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">GetObjects</span><span class="p">(</span><span class="s2">"lines"</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

<span class="n">radius</span> <span class="o">=</span> <span class="mf">0.3</span>    <span class="c1"># global radius for pipes</span>
<span class="n">fac</span> <span class="o">=</span> <span class="mf">0.15</span>     <span class="c1"># global scale for smooth corners (&lt;0.5)</span>
<span class="n">sub_level</span> <span class="o">=</span> <span class="mi">2</span>   <span class="c1"># steps of subdivisions (&lt;3 gets very slow quickly)</span>

<span class="c1"># create network from lines in Rhino</span>
<span class="n">lines</span> <span class="o">=</span> <span class="p">[(</span><span class="n">rs</span><span class="o">.</span><span class="n">CurveStartPoint</span><span class="p">(</span><span class="n">obj</span><span class="p">),</span> <span class="n">rs</span><span class="o">.</span><span class="n">CurveEndPoint</span><span class="p">(</span><span class="n">obj</span><span class="p">))</span> <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objs</span><span class="p">]</span>
<span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="o">.</span><span class="n">from_lines</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>

<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">network</span><span class="o">.</span><span class="n">vertices</span><span class="p">():</span>
    <span class="c1"># skip if node is not connected to any neighbour (leaf)</span>
    <span class="k">if</span> <span class="n">network</span><span class="o">.</span><span class="n">is_vertex_leaf</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
        <span class="k">continue</span>
    <span class="c1"># generate mesh per node</span>
    <span class="n">mesh</span> <span class="o">=</span> <span class="n">generate_node</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">fac</span><span class="p">)</span>
    <span class="c1"># subdivide mesh</span>
    <span class="n">mesh</span> <span class="o">=</span> <span class="n">mesh_subdivide_catmullclark</span><span class="p">(</span><span class="n">mesh</span><span class="p">,</span> <span class="n">sub_level</span><span class="p">)</span>
    <span class="c1"># draw mesh</span>
    <span class="n">mesh_draw_faces</span><span class="p">(</span><span class="n">mesh</span><span class="p">,</span> <span class="n">redraw</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">join_faces</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div>

</div>
</div>
<nav class="compas-sideways">
<a class="btn btn-primary compas-prev" href="../day2.html" role="button">Day 2</a>
<a class="btn btn-primary compas-next" href="numerical.html" role="button">Numerical</a>
</nav>
</main>
<div class="col-12 col-md-3 col-xl-2 compas-sidebar" role="navigation">
<div class="navbar-light">
<form action="../../../search.html" class="d-flex compas-searchbox" id="" method="get">
<input class="form-control" name="q" placeholder="Search docs" type="text"/>
<input name="check_keywords" type="hidden" value="yes"/>
<input name="area" type="hidden" value="default"/>
<button aria-controls="compas-navigation" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler d-md-none compas-navigation-toggler" data-target="#compas-navigation" data-toggle="collapse" type="button">
<span class="navbar-toggler-icon"></span>
</button>
</form>
<div class="navbar-expand-md">
<div class="collapse navbar-collapse compas-navigation" id="compas-navigation">
<ul class="nav flex-column active">
<li class="nav-item"><a class="nav-link reference internal" href="../../../overview.html">Overview</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../../../examples.html">Examples</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../../../tutorial.html">Tutorial</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../../../reference.html">API Reference</a></li>
<li class="nav-item active"><a class="nav-link reference internal" href="../../../workshops.html">Workshops</a><ul class="nav active">
<li class="nav-item active"><a class="nav-link reference internal" href="../../acadia2017.html">ACADIA 2017</a><ul class="nav active">
<li class="nav-item"><a class="nav-link reference internal" href="../day1.html">Day 1</a></li>
<li class="nav-item active"><a class="nav-link reference internal" href="../day2.html">Day 2</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../day3.html">Day 3</a></li>
</ul>
</li>
</ul>
</li>
<li class="nav-item"><a class="nav-link reference internal" href="../../../bibliography.html">Bibliography</a></li>
</ul>
</div>
</div>
</div>
</div>
<div class="d-none d-xl-block col-xl-2 compas-toc" role="toc">
<ul class="nav flex-column" id="compas-localnav">
<li class="nav-item"><a class="nav-link reference internal" href="#">Geometry</a><ul class="nav">
<li class="nav-item"><a class="nav-link reference internal" href="#introduction">Introduction</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="#object-oriented-interface-vs-functions">Object-Oriented Interface vs Functions</a><ul class="nav">
<li class="nav-item"><a class="nav-link reference internal" href="#exercise">Exercise:</a></li>
</ul>
</li>
<li class="nav-item"><a class="nav-link reference internal" href="#translational-surfaces-for-gridshells">Translational Surfaces for Gridshells</a><ul class="nav">
<li class="nav-item"><a class="nav-link reference internal" href="#id1">Exercise:</a></li>
</ul>
</li>
<li class="nav-item"><a class="nav-link reference internal" href="#torsion-free-elements-for-gridshells">Torsion-free Elements for Gridshells</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="#tessellation-of-a-freeform-barrel-vault">Tessellation of a freeform barrel vault</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<footer class="compas-footer">
            
                
                    © Copyright 2017, Block Research Group - ETH Zurich.
                
            

            
                Last updated on Oct 28, 2017.
            

            
                Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.1.
            
        </footer>
<script type="text/javascript">
var DOCUMENTATION_OPTIONS = {
    URL_ROOT:    '',
    VERSION:     '',
    COLLAPSE_INDEX: false,
    FILE_SUFFIX: '.html',
    HAS_SOURCE:  true,
    SOURCELINK_SUFFIX: '.txt'
};
            </script>
<script crossorigin="anonymous" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.0.0/anchor.js"></script>
<script src="/static/underscore.js"></script>
<script src="/static/doctools.js"></script>
<script src="https://compas-dev.github.io/compas/static/searchtools_.js"></script>
<script>
                hljs.initHighlightingOnLoad();
                anchors.add();
            </script>
</body>
</html>