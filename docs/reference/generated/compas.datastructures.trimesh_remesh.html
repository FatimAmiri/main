


<!DOCTYPE html>
<html lang="en">
    <head>
        <title>compas -- a computational framework for research in architecture and structures</title>

        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    
        <meta name="author" content="Tom Van Mele" />
        <meta name="description" content="compas is a computational framework for research in architecture and structures." />

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous" />
        <link rel="stylesheet" type="text/css" href="/css/github.css" />
        <link rel="stylesheet" type="text/css" href="/css/compas.css" />
        <link rel="stylesheet" type="text/css" href="/css/compas-reference.css" />

        
            <link rel="next" title="trimesh_subdivide_loop" href="compas.datastructures.trimesh_subdivide_loop.html" />
        
        
        
            <link rel="prev" title="voronoi_from_delaunay" href="compas.datastructures.voronoi_from_delaunay.html" />
        

        <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>

    </head>
    <body data-spy="scroll" data-target="#compas-localnav">

        <header class="navbar navbar-expand navbar-dark bg-dark compas-navbar">
            <a class="navbar-brand" href="/">compas</a>

                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link active" href="/main/">Main library</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/packages/">Additional Packages</a>
                    </li>
                </ul>
        </header>
        
        <div class="container-fluid compas-container">
            <div class="row flex-xl-nowrap">

                <main class="col-12 col-md-9 col-xl-8 compas-content" role="main">

                    

                        
    <nav class="breadcrumb">
        <a class="breadcrumb-item" href="https://compas-dev.github.io/">compas</a>
        <a class="breadcrumb-item" href="https://compas-dev.github.io/compas/index.html">main library</a>
        
            
                <a class="breadcrumb-item" href="../../reference.html" >api reference</a>
            
                <a class="breadcrumb-item" href="../compas.html" >compas</a>
            
                <a class="breadcrumb-item" href="../compas.datastructures.html" accesskey="U">datastructures</a>
            
        
    </nav>


                        

                        

                        <div class="section" id="trimesh-remesh">
<h1>trimesh_remesh</h1>
<dl class="function">
<dt id="compas.datastructures.trimesh_remesh">
<code class="descclassname">compas.datastructures.</code><code class="descname">trimesh_remesh</code><span class="sig-paren">(</span><em>mesh</em>, <em>target</em>, <em>kmax=100</em>, <em>tol=0.1</em>, <em>divergence=0.01</em>, <em>verbose=False</em>, <em>allow_boundary_split=False</em>, <em>allow_boundary_swap=False</em>, <em>allow_boundary_collapse=False</em>, <em>smooth=True</em>, <em>fixed=None</em>, <em>callback=None</em>, <em>callback_args=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/compas/datastructures/mesh/algorithms/optimisation.html#trimesh_remesh"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Remesh until all edges have a specified target length.</p>
<p>This involves three operations:</p>
<blockquote>
<div><ul class="simple">
<li>split edges that are longer than a maximum length,</li>
<li>collapse edges that are shorter than a minimum length,</li>
<li>swap edges if this improves the valency error.</li>
</ul>
</div></blockquote>
<p>The minimum and maximum lengths are calculated based on a desired target
length.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>mesh</strong> (<em>Mesh</em>) &#8211; A triangle mesh.</li>
<li><strong>target</strong> (<em>float</em>) &#8211; The target length for the mesh edges.</li>
<li><strong>kmax</strong> (<em>int, optional [100]</em>) &#8211; The number of iterations.</li>
<li><strong>tol</strong> (<em>float, optional [0.1]</em>) &#8211; Length deviation tolerance.</li>
<li><strong>divergence</strong> (<em>float, optional [0.01]</em>) &#8211; ??</li>
<li><strong>verbose</strong> (<em>bool, optional [False]</em>) &#8211; Print feedback messages.</li>
<li><strong>allow_boundary_split</strong> (<em>bool, optional [False]</em>) &#8211; Allow boundary edges to be split.</li>
<li><strong>allow_boundary_swap</strong> (<em>bool, optional [False]</em>) &#8211; Allow boundary edges or edges connected to the boundary to be swapped.</li>
<li><strong>allow_boundary_collapse</strong> (<em>bool, optional [False]</em>) &#8211; Allow boundary edges or edges connected to the boundary to be collapsed.</li>
<li><strong>smooth</strong> (<em>bool, optional [True]</em>) &#8211; Apply smoothing at every iteration.</li>
<li><strong>fixed</strong> (<em>list, optional [None]</em>) &#8211; A list of vertices that have to stay fixed.</li>
<li><strong>callback</strong> (<em>callable, optional [None]</em>) &#8211; A user-defined function that is called after every iteration.</li>
<li><strong>callback_args</strong> (<em>list, optional [None]</em>) &#8211; A list of additional parameters to be passed to the callback function.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>None</em></p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This algorithm not only changes the geometry of the mesh, but also its
topology as needed to achieve the specified target lengths.
Topological changes are made such that vertex valencies are well-balanced
and close to six.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Smoothing is done with area-based smoothing as this tends to produce better results.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">In the current implementation, allowing boundary collapses may lead to unexpected
results since it will not preserve the gometry of the original boundary.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference internal" href="compas.geometry.smooth_area.html#compas.geometry.smooth_area" title="compas.geometry.smooth_area"><code class="xref py py-func docutils literal"><span class="pre">compas.geometry.smooth_area()</span></code></a></li>
</ul>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><code class="language-python border rounded"><span></span><span class="kn">from</span> <span class="nn">compas.datastructures</span> <span class="kn">import</span> <span class="n">Mesh</span>
<span class="kn">from</span> <span class="nn">compas.visualization</span> <span class="kn">import</span> <span class="n">MeshPlotter</span>
<span class="kn">from</span> <span class="nn">compas.datastructures</span> <span class="kn">import</span> <span class="n">trimesh_remesh</span>

<span class="n">vertices</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
    <span class="p">(</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
    <span class="p">(</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
    <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
    <span class="p">(</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
<span class="p">]</span>
<span class="n">faces</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="p">]</span>

<span class="n">mesh</span> <span class="o">=</span> <span class="n">Mesh</span><span class="o">.</span><span class="n">from_vertices_and_faces</span><span class="p">(</span><span class="n">vertices</span><span class="p">,</span> <span class="n">faces</span><span class="p">)</span>

<span class="n">trimesh_remesh</span><span class="p">(</span>
    <span class="n">mesh</span><span class="p">,</span>
    <span class="n">target</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
    <span class="n">tol</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span>
    <span class="n">kmax</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
    <span class="n">allow_boundary_split</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">allow_boundary_swap</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="bp">False</span>
<span class="p">)</span>

<span class="n">plotter</span> <span class="o">=</span> <span class="n">MeshPlotter</span><span class="p">(</span><span class="n">mesh</span><span class="p">)</span>

<span class="n">plotter</span><span class="o">.</span><span class="n">draw_vertices</span><span class="p">(</span><span class="n">radius</span><span class="o">=</span><span class="mf">0.03</span><span class="p">)</span>
<span class="n">plotter</span><span class="o">.</span><span class="n">draw_faces</span><span class="p">()</span>
<span class="n">plotter</span><span class="o">.</span><span class="n">draw_edges</span><span class="p">()</span>

<span class="n">plotter</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="figure">
<img alt="../../_images/compas-datastructures-trimesh_remesh-1.png" src="../../_images/compas-datastructures-trimesh_remesh-1.png" />
</div>
<p class="rubric">References</p>
<ul class="simple">
<li>Botsch, M. &amp; Kobbelt, L., 2004. A remeshing approach to multiresolution modeling. Proceedings of the 2004 Eurographics/ACM SIGGRAPH symposium on Geometry processing - SGP &#8216;04, p.185.
Available at: <a class="reference external" href="http://portal.acm.org/citation.cfm?doid=1057432.1057457">http://portal.acm.org/citation.cfm?doid=1057432.1057457</a></li>
</ul>
</dd></dl>

</div>

                        
                        <nav class="compas-sideways">
                            
                                <a href="compas.datastructures.voronoi_from_delaunay.html" class="btn btn-primary compas-prev" role="button">voronoi_from_delaunay</a>
                            

                            
                                <a href="compas.datastructures.trimesh_subdivide_loop.html" class="btn btn-primary compas-next" role="button">trimesh_subdivide_loop</a>
                            
                        </nav>

                    

                </main>

                <div class="col-12 col-md-3 col-xl-2 compas-sidebar" role="navigation"> 
                    <div class="navbar-light">

                        <form id="" class="d-flex compas-searchbox" action="../../search.html" method="get">
                            <input class="form-control" type="text" name="q" placeholder="Search docs" />
                            <input type="hidden" name="check_keywords" value="yes" />
                            <input type="hidden" name="area" value="default" />

                            <button class="navbar-toggler d-md-none compas-navigation-toggler" type="button" data-toggle="collapse" data-target="#compas-navigation" aria-controls="compas-navigation" aria-expanded="false" aria-label="Toggle navigation">
                                <span class="navbar-toggler-icon"></span>
                            </button>
                        </form>

                        
                        

                            <div class="navbar-expand-md">
                                <div id="compas-navigation" class="collapse navbar-collapse compas-navigation">

                                <ul class="nav flex-column active">
<li class="nav-item"><a class="nav-link reference internal" href="../../overview.html">Overview</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../../examples.html">Examples</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../../tutorial.html">Tutorial</a></li>
<li class="nav-item active"><a class="nav-link reference internal" href="../../reference.html">API Reference</a><ul class="nav active">
<li class="nav-item active"><a class="nav-link reference internal" href="../compas.html">compas</a><ul class="nav active">
<li class="nav-item"><a class="nav-link reference internal" href="../compas.com.html">com</a></li>
<li class="nav-item active"><a class="nav-link reference internal" href="../compas.datastructures.html">datastructures</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../compas.files.html">files</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../compas.geometry.html">geometry</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../compas.hpc.html">hpc</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../compas.interop.html">interop</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../compas.numerical.html">numerical</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../compas.utilities.html">utilities</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../compas.topology.html">topology</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../compas.visualization.html">visualization</a></li>
</ul>
</li>
<li class="nav-item"><a class="nav-link reference internal" href="../compas_rhino.html">compas_rhino</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../compas_blender.html">compas_blender</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../compas_maya.html">compas_maya</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../compas_grasshopper.html">compas_grasshopper</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../compas_dynamo.html">compas_dynamo</a></li>
</ul>
</li>
<li class="nav-item"><a class="nav-link reference internal" href="../../workshops.html">Workshops</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../../bibliography.html">Bibliography</a></li>
</ul>


                                </div>
                            </div>

                        

                    </div>
                </div>
                
                <div class="d-none d-xl-block col-xl-2 compas-toc" role="toc">

                    

                    <ul class="nav flex-column" id="compas-localnav">
<li class="nav-item"><a class="nav-link reference internal" href="#">trimesh_remesh</a></li>
</ul>


                </div>
            </div>
        </div>

        <footer class="compas-footer">
            
                
                    &#169; Copyright 2017, Block Research Group - ETH Zurich.
                
            

            
                Last updated on Nov 01, 2017.
            

            
                Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.1.
            
        </footer>

        

            <script type="text/javascript">
var DOCUMENTATION_OPTIONS = {
    URL_ROOT:    '',
    VERSION:     '',
    COLLAPSE_INDEX: false,
    FILE_SUFFIX: '.html',
    HAS_SOURCE:  true,
    SOURCELINK_SUFFIX: '.txt'
};
            </script>

            <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>

            <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
            
            <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.0.0/anchor.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js"></script>

            <script src="/static/underscore.js"></script>
            <script src="/static/doctools.js"></script>
            <script src="https://compas-dev.github.io/main/static/searchtools_.js"></script>

            <script>
                hljs.initHighlightingOnLoad();
                anchors.add();

                var clipboard = new Clipboard('.language-python');
            </script>

        
    </body>
</html>